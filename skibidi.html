<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resizable Web2View Loader</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{
    display:flex;
    justify-content:center;
    align-items:center; /* center panel */
    height:100vh;
    background:linear-gradient(135deg,#1e3c72,#2a5298);
    overflow:hidden;
    color:#fff;
    position:relative;
}

/* Floating circles */
.circle{position:absolute;border-radius:50%;opacity:0.2;animation: float 25s infinite linear;}
.circle:nth-child(1){width:200px;height:200px;background:#ff6ec7;top:10%;left:15%;}
.circle:nth-child(2){width:150px;height:150px;background:#00f2fe;top:50%;left:70%;}
.circle:nth-child(3){width:250px;height:250px;background:#ffde6c;top:70%;left:30%;}
@keyframes float{0%{transform:translateY(0) rotate(0deg);}50%{transform:translateY(-50px) rotate(180deg);}100%{transform:translateY(0) rotate(360deg);}}

/* Container (resizable) */
.container{
    position:relative;
    width:500px;
    min-width:300px;
    min-height:400px;
    max-width:90vw;
    max-height:90vh;
    background: rgba(255,255,255,0.05);
    border-radius: 20px;
    backdrop-filter: blur(15px);
    box-shadow:0 20px 60px rgba(0,0,0,0.3);
    padding:20px;
    display:flex;
    flex-direction:column;
    transition:opacity 0.3s;
    overflow:hidden;
    resize: both; /* makes resizable from corner */
}

/* Tabs */
.tabs{display:flex;justify-content:space-around;margin-bottom:10px;}
.tab{padding:8px 16px;cursor:pointer;border-radius:12px;transition:0.3s;}
.tab.active, .tab:hover{background:rgba(255,255,255,0.2);}

/* Tab Content */
.tab-content{display:none;flex:1;overflow:auto;}
.tab-content.active{display:block;}

/* Buttons */
button{padding:12px 32px;font-size:1rem;font-weight:600;color:#fff;background:linear-gradient(45deg,#ff6ec7,#00f2fe);border:none;border-radius:40px;cursor:pointer;transition:all 0.3s ease;box-shadow:0 0 20px rgba(0,0,0,0.2);margin-top:10px;}
button:hover{transform:scale(1.05);box-shadow:0 0 40px rgba(255,110,199,0.6),0 0 40px rgba(0,242,254,0.6);}

/* Inject overlay */
#injectOverlay{
    position:absolute;
    top:0;left:0;width:100%;height:100%;
    background:rgba(0,0,0,0.9);
    display:flex;justify-content:center;align-items:center;flex-direction:column;
    opacity:0;pointer-events:none;
    transition:opacity 0.5s;
    z-index:10;
}
#injectOverlay.show{opacity:1;pointer-events:auto;}
.loader{border:5px solid rgba(255,255,255,0.2);border-top:5px solid #fff;border-radius:50%;width:80px;height:80px;animation:spin 1s linear infinite;margin-bottom:20px;}
@keyframes spin{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}
#successMessage{opacity:0;font-size:2rem;transition:opacity 0.5s;color:#fff;}
#successMessage.show{opacity:1;}
</style>
</head>
<body>

<div class="circle"></div>
<div class="circle"></div>
<div class="circle"></div>

<div class="container">
    <div class="tabs">
        <div class="tab active" data-tab="home">Home</div>
        <div class="tab" data-tab="settings">Settings</div>
        <div class="tab" data-tab="about">About</div>
    </div>

    <div id="home" class="tab-content active">
        <h2>Welcome!</h2>
        <button id="testBtn">Press Me</button>
        <button id="injectBtn">Inject</button>
    </div>

    <div id="settings" class="tab-content">
        <h2>Settings</h2>
        <label><input type="checkbox" id="featureA"> Feature A</label><br>
        <label><input type="checkbox" id="featureB"> Feature B</label><br>
        <label>Slider:</label>
        <input type="range" id="slider1" min="0" max="100" value="50"><br>
        <label>Theme Color:</label>
        <input type="color" id="themeColor" value="#00f2fe"><br>
        <div class="preconfigs">
            <button data-theme="dark">Dark</button>
            <button data-theme="light">Light</button>
            <button data-theme="neon">Neon</button>
        </div>
    </div>

    <div id="about" class="tab-content">
        <h2>About</h2>
        <p>Web2View loader with resizable panel, tabs, and inject overlay.</p>
    </div>
</div>

<div id="injectOverlay">
    <div class="loader"></div>
    <div id="successMessage">Success!</div>
</div>

<script>
// Tabs
const tabs = document.querySelectorAll('.tab');
const contents = document.querySelectorAll('.tab-content');
tabs.forEach(tab=>{
    tab.addEventListener('click',()=>{
        tabs.forEach(t=>t.classList.remove('active'));
        tab.classList.add('active');
        const target = tab.getAttribute('data-tab');
        contents.forEach(c=>c.classList.remove('active'));
        document.getElementById(target).classList.add('active');
    });
});

// WebView2 messaging
function sendMessage(msg){if(window.chrome && window.chrome.webview) window.chrome.webview.postMessage(msg);}

// Buttons
document.getElementById('testBtn').addEventListener('click',()=>sendMessage('testBtn'));
document.getElementById('featureA').addEventListener('change',()=>sendMessage('featureA'));
document.getElementById('featureB').addEventListener('change',()=>sendMessage('featureB'));
document.getElementById('slider1').addEventListener('input',()=>sendMessage('slider1'));
document.getElementById('themeColor').addEventListener('input',()=>sendMessage('themeColor'));

// Preconfigs
document.querySelectorAll('.preconfigs button').forEach(btn=>{
    btn.addEventListener('click',()=>{
        const theme = btn.getAttribute('data-theme');
        applyTheme(theme);
        sendMessage(`preconfig:${theme}`);
    });
});

function applyTheme(theme){
    if(theme==='dark'){document.body.style.background='linear-gradient(135deg,#1e1e1e,#3c3c3c)';}
    else if(theme==='light'){document.body.style.background='linear-gradient(135deg,#ffffff,#d0d0d0)';}
    else if(theme==='neon'){document.body.style.background='linear-gradient(135deg,#ff00ff,#00ffff)';}
}

// Inject overlay
document.getElementById('injectBtn').addEventListener('click',()=>{
    const overlay=document.getElementById('injectOverlay');
    const success=document.getElementById('successMessage');
    const container=document.querySelector('.container');

    container.style.opacity='0';
    overlay.classList.add('show');
    sendMessage('inject_start');

    setTimeout(()=>{
        overlay.querySelector('.loader').style.display='none';
        success.classList.add('show');
        sendMessage('inject_success');

        setTimeout(()=>{
            overlay.classList.remove('show');
            overlay.querySelector('.loader').style.display='block';
            success.classList.remove('show');
            container.style.opacity='1';
        },1500);
    },2000);
});

// Block devtools
document.addEventListener('keydown', e=>{
    if(e.key==='F12' || (e.ctrlKey && e.shiftKey && (e.key==='I'||e.key==='J')) || (e.ctrlKey&&(e.key==='U'||e.key==='S'))){e.preventDefault();}
});
</script>
</body>
</html>
